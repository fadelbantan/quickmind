<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>QuickMind</title>

  <!-- MindElixir CDN -->
  <script src="https://cdn.jsdelivr.net/npm/mind-elixir/dist/mind-elixir.min.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #f5f5f5;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    #map {
      height: 100vh;
    }

    .toolbar {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 1000;
    }

    .toolbar button {
      margin-right: 8px;
      padding: 6px 10px;
      font-size: 14px;
      border: 1px solid #ccc;
      background: white;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .toolbar button:hover {
      background: #eaeaea;
    }
  </style>
</head>

<body>
  <div class="toolbar">
    <button onclick="saveMap()">ðŸ’¾ Save Map</button>
    <!-- Optional buttons for later -->
    <!-- <button onclick="loadMap()">ðŸ“‚ Load Map</button> -->
  </div>

  <div id="map"></div>

  <script>
    const options = {
      el: document.getElementById('map'),
      direction: MindElixir.RIGHT,
      draggable: true,
      contextMenu: true,
      toolBar: true,
      nodeMenu: true,
      keypress: true,
      data: MindElixir.new('Central Idea'),
    }

    const mind = new MindElixir(options)
    mind.init()

    // Focus root node after init
    setTimeout(() => {
      mind.selectNode(mind.root)
    }, 300)

    // Press Enter to add a child node
    document.addEventListener('keydown', function (e) {
      if (e.key === 'Enter' && mind.currentNode) {
        mind.addChild(mind.currentNode)
      }
    })

    // Save the mind map to JSON file
    function saveMap() {
      const data = mind.getData()
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' })
      const url = URL.createObjectURL(blob)
      const a = document.createElement('a')
      a.href = url
      a.download = 'quickmind-map.json'
      a.click()
      URL.revokeObjectURL(url)
    }

    window.mind = mind // expose globally (if needed)
  </script>
</body>
</html>
